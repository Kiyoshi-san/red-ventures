{"version":3,"sources":["js/greenthumb.js"],"names":["petIcon","require","toxicIcon","sunNoIcon","sunLowIcon","sunHighIcon","waterRarelyIcon","waterDailyIcon","waterRegularlyIcon","page","functions","handleSubmit","params","requestPath","document","querySelectorAll","getAttribute","forEach","e","addEventListener","formData","FormData","querySelector","iterations","entries","length","selectVal","xmlHttpHandler","xhr","XMLHttpRequest","onreadystatechange","readyState","DONE","status","handleUpdateComponent","JSON","parse","responseText","console","log","error","noResult","open","send","data","remove","domElement","createElement","template","hasStaffFavorite","map","staff_favorite","url","name","price","toxicity","sun","water","classList","add","innerHTML","insertBefore","isNoResult","events","Initialize","window","onload"],"mappings":";;;;;;AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,wBAAD,CAArB;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,0BAAD,CAAvB;;AACA,IAAIE,SAAS,GAAGF,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIG,UAAU,GAAGH,OAAO,CAAC,4BAAD,CAAxB;;AACA,IAAII,WAAW,GAAGJ,OAAO,CAAC,6BAAD,CAAzB;;AACA,IAAIK,eAAe,GAAGL,OAAO,CAAC,2BAAD,CAA7B;;AACA,IAAIM,cAAc,GAAGN,OAAO,CAAC,4BAAD,CAA5B;;AACA,IAAIO,kBAAkB,GAAGP,OAAO,CAAC,4BAAD,CAAhC;;AAEA,IAAMQ,IAAI,GAAG;AACXC,EAAAA,SAAS,EAAE;AACTC,IAAAA,YAAY,EAAE,wBAAM;AAChB,UAAIC,MAAM,GAAG,GAAb;AACA,UAAIC,WAAW,aAAMC,QAAQ,CAACC,gBAAT,CAA0B,uBAA1B,EAAmD,CAAnD,EAAsDC,YAAtD,CAAmE,QAAnE,CAAN,CAAf;AAEAF,MAAAA,QAAQ,CAACC,gBAAT,CAA0B,8BAA1B,EAA0DE,OAA1D,CAAkE,UAAAC,CAAC,EAAI;AACnEA,QAAAA,CAAC,CAACC,gBAAF,CAAmB,QAAnB,EAA6B,UAAAD,CAAC,EAAI;AAC9B,cAAME,QAAQ,GAAG,IAAIC,QAAJ,CAAaP,QAAQ,CAACQ,aAAT,CAAuB,uBAAvB,CAAb,CAAjB;AACA,cAAIC,UAAU,GAAGH,QAAQ,CAACI,OAAT,GAAmBC,MAApC;AACA,cAAIb,MAAM,GAAG,GAAb;;AAH8B,qDAKRQ,QAAQ,CAACI,OAAT,EALQ;AAAA;;AAAA;AAK9B,gEAA0C;AAAA,kBAAjCE,SAAiC;;AACtC,kBAAGA,SAAS,CAAC,CAAD,CAAT,IAAgB,MAAnB,EAA2B;AACvBd,gBAAAA,MAAM,cAAOc,SAAS,CAAC,CAAD,CAAhB,cAAuBA,SAAS,CAAC,CAAD,CAAhC,SAAsC,CAAC,GAAEH,UAAH,GAAc,GAAd,GAAkB,EAAxD,CAAN;AACH;AACJ;AAT6B;AAAA;AAAA;AAAA;AAAA;;AAU9Bd,UAAAA,IAAI,CAACC,SAAL,CAAeiB,cAAf,WAAiCd,WAAjC,SAA+CD,MAA/C;AACH,SAXD;AAYH,OAbD;AAcH,KAnBQ;AAoBTe,IAAAA,cAAc,EAAE,wBAASd,WAAT,EAAsB;AAClC,UAAIe,GAAG,GAAG,IAAIC,cAAJ,EAAV;;AACAD,MAAAA,GAAG,CAACE,kBAAJ,GAAyB,YAAW;AAChC,YAAIF,GAAG,CAACG,UAAJ,IAAkBF,cAAc,CAACG,IAArC,EAA2C;AACvC,cAAIJ,GAAG,CAACK,MAAJ,IAAc,GAAlB,EAAuB;AACnBxB,YAAAA,IAAI,CAACC,SAAL,CAAewB,qBAAf,CAAqCC,IAAI,CAACC,KAAL,CAAWR,GAAG,CAACS,YAAf,CAArC;AACH,WAFD,MAEO,IAAGT,GAAG,CAACK,MAAJ,IAAc,GAAjB,EAAsB;AACzBK,YAAAA,OAAO,CAACC,GAAR,kBAAsBJ,IAAI,CAACC,KAAL,CAAWR,GAAG,CAACS,YAAf,EAA6BG,KAAnD;AACA/B,YAAAA,IAAI,CAACC,SAAL,CAAe+B,QAAf,CAAwB,IAAxB;AACH,WAHM,MAGA;AACHH,YAAAA,OAAO,CAACC,GAAR,CAAY,wDAAZ;AACA9B,YAAAA,IAAI,CAACC,SAAL,CAAe+B,QAAf,CAAwB,IAAxB;AACH;AACJ;AACJ,OAZD;;AAaAb,MAAAA,GAAG,CAACc,IAAJ,CAAS,KAAT,EAAgB7B,WAAhB,EAA6B,IAA7B;AACAe,MAAAA,GAAG,CAACe,IAAJ;AACH,KArCQ;AAsCTT,IAAAA,qBAAqB,EAAE,+BAASU,IAAT,EAAe;AAClC,UAAGA,IAAI,CAACnB,MAAR,EAAgB;AACZhB,QAAAA,IAAI,CAACC,SAAL,CAAe+B,QAAf,CAAwB,KAAxB;;AACA,YAAG3B,QAAQ,CAACC,gBAAT,CAA0B,yBAA1B,EAAqDU,MAAxD,EAAgE;AAC5DX,UAAAA,QAAQ,CAACC,gBAAT,CAA0B,yBAA1B,EAAqD,CAArD,EAAwD8B,MAAxD;AACH;;AAED,YAAIC,UAAU,GAAGhC,QAAQ,CAACiC,aAAT,CAAuB,KAAvB,CAAjB;AAEA,YAAIC,QAAQ,GAAG,EAAf;AAAA,YAAmBC,gBAAgB,GAAG,KAAtC;AACAL,QAAAA,IAAI,CAACM,GAAL,CAAS,UAAAhC,CAAC,EAAI;AACV8B,UAAAA,QAAQ,4CACN9B,CAAC,CAACiC,cAAF,IAAoB,CAACF,gBAArB,GACI,gBADJ,GAEI,eAHE,qEAMF/B,CAAC,CAACiC,cAAF,IAAoB,CAACF,gBAArB,GACI,EADJ,GAEI,QARF,gMAaY/B,CAAC,CAACkC,GAbd,sBAa2BlC,CAAC,CAACmC,IAb7B,kKAgB2BnC,CAAC,CAACmC,IAhB7B,0KAmBiBnC,CAAC,CAACoC,KAnBnB,kKAsBoBtD,OAtBpB,0EAwBUkB,CAAC,CAACqC,QAAF,wBACiBrD,SADjB,mCAEI,EA1Bd,+CA6BUgB,CAAC,CAACsC,GAAF,IAAS,IAAT,wBACiBrD,SADjB,mCAEIe,CAAC,CAACsC,GAAF,IAAS,KAAT,wBACapD,UADb,mCAEAc,CAAC,CAACsC,GAAF,IAAS,MAAT,wBACanD,WADb,mCAEA,EAnCd,+CAsCUa,CAAC,CAACuC,KAAF,IAAW,QAAX,wBACiBnD,eADjB,mCAEIY,CAAC,CAACuC,KAAF,IAAW,OAAX,wBACalD,cADb,mCAEAW,CAAC,CAACuC,KAAF,IAAW,WAAX,wBACajD,kBADb,mCAEA,EA5Cd,6HAAR;AAmDAyC,UAAAA,gBAAgB,GAAG/B,CAAC,CAACiC,cAAF,GAAmB,IAAnB,GAA0BF,gBAA7C;AACH,SArDD;AAuDAH,QAAAA,UAAU,CAACY,SAAX,CAAqBC,GAArB,CAAyB,wBAAzB;AAEAb,QAAAA,UAAU,CAACc,SAAX,GAAuBZ,QAAvB;AACAlC,QAAAA,QAAQ,CAACC,gBAAT,CAA0B,sDAA1B,EAAkF,CAAlF,EAAqF8C,YAArF,CAAkGf,UAAlG,EAA8G,IAA9G;AACH;AACJ,KA5GQ;AA6GTL,IAAAA,QAAQ,EAAE,kBAASqB,UAAT,EAAqB;AAC3B,UAAGA,UAAH,EAAe;AACXhD,QAAAA,QAAQ,CAACC,gBAAT,CAA0B,uBAA1B,EAAmD,CAAnD,EAAsD2C,SAAtD,CAAgEb,MAAhE,CAAuE,QAAvE;AACA/B,QAAAA,QAAQ,CAACC,gBAAT,CAA0B,0BAA1B,EAAsD,CAAtD,EAAyD2C,SAAzD,CAAmEC,GAAnE,CAAuE,QAAvE;AACH,OAHD,MAGO;AACH7C,QAAAA,QAAQ,CAACC,gBAAT,CAA0B,uBAA1B,EAAmD,CAAnD,EAAsD2C,SAAtD,CAAgEC,GAAhE,CAAoE,QAApE;AACA7C,QAAAA,QAAQ,CAACC,gBAAT,CAA0B,0BAA1B,EAAsD,CAAtD,EAAyD2C,SAAzD,CAAmEb,MAAnE,CAA0E,QAA1E;AACH;AACJ;AArHQ,GADA;AAwHXkB,EAAAA,MAAM,EAAE;AACNC,IAAAA,UAAU,EAAE,oBAAUC,MAAV,EAAkB;AAC5BxD,MAAAA,IAAI,CAACC,SAAL,CAAeC,YAAf;AACD;AAHK;AAxHG,CAAb;AA+HAsD,MAAM,CAACC,MAAP,GAAgBzD,IAAI,CAACsD,MAAL,CAAYC,UAAZ,CAAuB,IAAvB,CAAhB","file":"greenthumb.6e3802c5.js","sourceRoot":"..","sourcesContent":["let petIcon = require(\"~/images/icons/pet.svg\");\r\nlet toxicIcon = require(\"~/images/icons/toxic.svg\");\r\nlet sunNoIcon = require(\"~/images/icons/no-sun.svg\");\r\nlet sunLowIcon = require(\"~/images/icons/low-sun.svg\");\r\nlet sunHighIcon = require(\"~/images/icons/high-sun.svg\");\r\nlet waterRarelyIcon = require(\"~/images/icons/1-drop.svg\");\r\nlet waterDailyIcon = require(\"~/images/icons/2-drops.svg\");\r\nlet waterRegularlyIcon = require(\"~/images/icons/3-drops.svg\");\r\n\r\nconst page = {\r\n  functions: {\r\n    handleSubmit: () => {\r\n        let params = \"?\";\r\n        let requestPath = `${document.querySelectorAll(\".page-greenthumb form\")[0].getAttribute(\"action\")}`;\r\n\r\n        document.querySelectorAll(\".page-greenthumb form select\").forEach(e => {\r\n            e.addEventListener(\"change\", e => {\r\n                const formData = new FormData(document.querySelector('.page-greenthumb form'));\r\n                let iterations = formData.entries().length;\r\n                let params = \"?\";\r\n\r\n                for (var selectVal of formData.entries()) {\r\n                    if(selectVal[1] != \"null\") {\r\n                        params += `${selectVal[0]}=${selectVal[1]}${!--iterations?'&':''}`;\r\n                    }\r\n                }\r\n                page.functions.xmlHttpHandler(`${requestPath}${params}`);\r\n            });\r\n        });\r\n    },\r\n    xmlHttpHandler: function(requestPath) {\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.onreadystatechange = function() {\r\n            if (xhr.readyState == XMLHttpRequest.DONE) {\r\n                if (xhr.status == 200) {\r\n                    page.functions.handleUpdateComponent(JSON.parse(xhr.responseText))\r\n                } else if(xhr.status == 422) {\r\n                    console.log(`Error: ${JSON.parse(xhr.responseText).error}`);\r\n                    page.functions.noResult(true);\r\n                } else {\r\n                    console.log('Something went wrong, please try again in few minutes.');\r\n                    page.functions.noResult(true);\r\n                }\r\n            }\r\n        }\r\n        xhr.open('GET', requestPath, true);\r\n        xhr.send();\r\n    },\r\n    handleUpdateComponent: function(data) {\r\n        if(data.length) {\r\n            page.functions.noResult(false);\r\n            if(document.querySelectorAll(\".product-tile-container\").length) {\r\n                document.querySelectorAll(\".product-tile-container\")[0].remove();\r\n            }\r\n            \r\n            let domElement = document.createElement('div');\r\n            \r\n            let template = \"\", hasStaffFavorite = false;\r\n            data.map(e => {\r\n                template += `<div class=\"product-tile-box ${\r\n                  e.staff_favorite && !hasStaffFavorite\r\n                    ? \"staff-favorite\"\r\n                    : \"standart-tile\"\r\n                }\">\r\n                    <div class=staff-favorite--tag ${\r\n                      e.staff_favorite && !hasStaffFavorite\r\n                        ? \"\"\r\n                        : \"hidden\"\r\n                    }>\r\n                        <span>âœ¨ Staff favorite</span>\r\n                    </div>\r\n                    <div class=\"image-container\">\r\n                        <img src=\"${e.url}\" alt=\"${e.name}-greenthumb\">\r\n                    </div>\r\n                    <div class=\"column-container\">\r\n                        <div class=\"title\"><span>${e.name}</span></div>\r\n                        <div class=\"attributes\">\r\n                            <div class=\"price\">\r\n                                <span>$${e.price}</span>\r\n                            </div>\r\n                            <div class=\"icons-container\">\r\n                                <img src=\"${petIcon}\" alt=\"pick-greenthumb\">\r\n                                ${\r\n                                  e.toxicity\r\n                                    ? `<img src=\"${toxicIcon}\" alt=\"pick-greenthumb\">`\r\n                                    : \"\"\r\n                                }\r\n                                ${\r\n                                  e.sun == \"no\"\r\n                                    ? `<img src=\"${sunNoIcon}\" alt=\"pick-greenthumb\">`\r\n                                    : e.sun == \"low\"\r\n                                    ? `<img src=\"${sunLowIcon}\" alt=\"pick-greenthumb\">`\r\n                                    : e.sun == \"high\"\r\n                                    ? `<img src=\"${sunHighIcon}\" alt=\"pick-greenthumb\">`\r\n                                    : \"\"\r\n                                }\r\n                                ${\r\n                                  e.water == \"rarely\"\r\n                                    ? `<img src=\"${waterRarelyIcon}\" alt=\"pick-greenthumb\">`\r\n                                    : e.water == \"daily\"\r\n                                    ? `<img src=\"${waterDailyIcon}\" alt=\"pick-greenthumb\">`\r\n                                    : e.water == \"regularly\"\r\n                                    ? `<img src=\"${waterRegularlyIcon}\" alt=\"pick-greenthumb\">`\r\n                                    : \"\"\r\n                                }\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>`;\r\n\r\n                hasStaffFavorite = e.staff_favorite ? true : hasStaffFavorite;\r\n            });\r\n\r\n            domElement.classList.add('product-tile-container');\r\n\r\n            domElement.innerHTML = template;\r\n            document.querySelectorAll('.results-container .wrapper .products-list-container')[0].insertBefore(domElement, null);\r\n        }\r\n    },\r\n    noResult: function(isNoResult) {\r\n        if(isNoResult) {\r\n            document.querySelectorAll(\".no-results-container\")[0].classList.remove('hidden');\r\n            document.querySelectorAll(\".products-list-container\")[0].classList.add('hidden');\r\n        } else {\r\n            document.querySelectorAll(\".no-results-container\")[0].classList.add('hidden');\r\n            document.querySelectorAll(\".products-list-container\")[0].classList.remove('hidden');\r\n        }\r\n    }\r\n  },\r\n  events: {\r\n    Initialize: function (window) {\r\n      page.functions.handleSubmit();\r\n    },\r\n  },\r\n};\r\n\r\nwindow.onload = page.events.Initialize(this);\r\n"]}